<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../static/styles.css" />
  </head>
  <body>
    <header class="header">
      <img src="../static/images/logo.png" alt="" />
      <!-- <h1>BullTRADE</h1> -->

      <div class="menu">
        <a href="{{ url_for('logout') }}">SAIR</a>
        <h4>Bem-Vindo, {{ nome }}!</h4>
      </div>
    </header>

    <div class="progress-banner">
      <h1>Treinamento Gratuito - Academy</h1>
      <p>Domine o mercado com nosso treinamento completo</p>

      <span>Progresso do Curso:</span>
      <div class="progress-bar">
        <div class="progress" id="progress">0%</div>
      </div>
    </div>

    <div class="containerAcademy">
        <h1>Tutoriais do App</h1>
        <p>Comece por aqui! Aprenda a configurar e utilizar o app corretamente para maximizar seus resultados.</p>


        <div class="video-section">
            <h2>Como usar Confirmação</h2>
            <iframe src="https://www.youtube.com/embed/VIDEO_ID_1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <button onclick="markAsCompleted(this, 20)" id="video1">Marcar como concluído</button>
        </div>

        <div class="video-section">
            <h2>Como Usar Confirmação (Recomendado)</h2>
            <iframe src="https://www.youtube.com/embed/VIDEO_ID_2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <button onclick="markAsCompleted(this, 40)" id="video2">Marcar como concluído</button>
        </div>

        <div class="video-section">
            <h2>Estratégia Avançada</h2>
            <iframe src="https://www.youtube.com/embed/VIDEO_ID_3" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <button onclick="markAsCompleted(this, 60)" id="video3">Marcar como concluído</button>
        </div>

        <div class="video-section">
            <h2>Gestão de Risco</h2>
            <iframe src="https://www.youtube.com/embed/VIDEO_ID_4" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <button onclick="markAsCompleted(this, 80)" id="video4">Marcar como concluído</button>
        </div>

        <div class="video-section">
            <h2>Conclusão do Curso</h2>
            <iframe src="https://www.youtube.com/embed/VIDEO_ID_5" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <button onclick="markAsCompleted(this, 100)" id="video5">Marcar como concluído</button>
        </div>
    </div>

    <footer>
      <nav>
        <a href="{{ url_for('home') }}">Home</a>
        <a href="">Academy</a>
        <a class="live" href="#">Lives</a>
        <a href="#">News</a>
        <a href="#">Histórico</a>
      </nav>
    </footer>

    <script>
        // Função para marcar um vídeo como concluído
        function markAsCompleted(button, percentage) {
            if (!button.classList.contains('completed')) {
                button.textContent = "Concluído";
                button.classList.add('completed');
                button.disabled = true;

                // Atualiza o progresso
                updateProgress(percentage);

                // Salva o estado no localStorage
                localStorage.setItem(button.id, 'completed');
                localStorage.setItem('progress', percentage);
            }
        }

        // Função para atualizar a barra de progresso
        function updateProgress(percentage) {
            const progressBar = document.getElementById('progress');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = percentage + '%';

       }

        // Função para carregar o estado salvo ao recarregar a página
        function loadState() {
            // Verifica o progresso salvo
            const savedProgress = localStorage.getItem('progress');

            if (savedProgress) {
                updateProgress(parseInt(savedProgress));
            }


            // Verifica quais vídeos foram concluídos
            const videos = ['video1', 'video2', 'video3', 'video4', 'video5'];
            videos.forEach(videoId => {
                if (localStorage.getItem(videoId)) {
                    const button = document.getElementById(videoId);
                    button.textContent = "Concluído";
                    button.classList.add('completed');
                    button.disabled = true;
                }
            });
        }

        // Carrega o estado ao carregar a página
        window.onload = loadState;
    </script>
  </body>
</html>
